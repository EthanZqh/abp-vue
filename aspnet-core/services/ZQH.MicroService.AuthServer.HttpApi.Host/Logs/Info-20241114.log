2024-11-14 00:06:36 [INF] [Microsoft.EntityFrameworkCore.Database.Command] [13556] [90] - Executed DbCommand (2ms) [Parameters=[@__ef_filter__p_0='?' (DbType = Boolean), @__Subtract_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
DELETE `a`
FROM `AbpSessions` AS `a`
WHERE (@__ef_filter__p_0 OR (`a`.`TenantId` IS NULL)) AND (`a`.`LastAccessed` IS NULL OR (`a`.`LastAccessed` < @__Subtract_0))
2024-11-14 00:06:58 [INF] [Volo.Abp.OpenIddict.Tokens.TokenCleanupBackgroundWorker] [13556] [123] - Lock is acquired for TokenCleanupBackgroundWorker
2024-11-14 00:06:58 [INF] [Volo.Abp.OpenIddict.Tokens.TokenCleanupService] [13556] [123] - Start cleanup.
2024-11-14 00:06:58 [INF] [Volo.Abp.OpenIddict.Tokens.TokenCleanupService] [13556] [123] - Start cleanup tokens.
2024-11-14 00:06:58 [INF] [Microsoft.EntityFrameworkCore.Database.Command] [13556] [123] - Executed DbCommand (1ms) [Parameters=[@__ef_filter__p_0='?' (DbType = Boolean), @__date_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
DELETE `o`
FROM `OpenIddictTokens` AS `o`
LEFT JOIN (
    SELECT `o0`.`Id`, `o0`.`Status`
    FROM `OpenIddictAuthorizations` AS `o0`
    WHERE @__ef_filter__p_0 OR NOT (`o0`.`IsDeleted`)
) AS `t` ON `o`.`AuthorizationId` = `t`.`Id`
WHERE ((@__ef_filter__p_0 OR NOT (`o`.`IsDeleted`)) AND (`o`.`CreationDate` < @__date_0)) AND (((`o`.`Status` NOT IN ('inactive', 'valid') OR (`o`.`Status` IS NULL)) OR (`t`.`Id` IS NOT NULL AND ((`t`.`Status` <> 'valid') OR `t`.`Status` IS NULL))) OR (`o`.`ExpirationDate` < UTC_TIMESTAMP()))
2024-11-14 00:06:58 [INF] [Volo.Abp.OpenIddict.Tokens.TokenCleanupService] [13556] [123] - Start cleanup authorizations.
2024-11-14 00:06:58 [INF] [Microsoft.EntityFrameworkCore.Database.Command] [13556] [101] - Executed DbCommand (1ms) [Parameters=[@__ef_filter__p_0='?' (DbType = Boolean), @__date_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT `o`.`Id`
FROM `OpenIddictAuthorizations` AS `o`
LEFT JOIN (
    SELECT `o0`.`Id`, `o0`.`AuthorizationId`
    FROM `OpenIddictTokens` AS `o0`
    WHERE @__ef_filter__p_0 OR NOT (`o0`.`IsDeleted`)
) AS `t` ON `o`.`Id` = `t`.`AuthorizationId`
WHERE ((@__ef_filter__p_0 OR NOT (`o`.`IsDeleted`)) AND (`o`.`CreationDate` < @__date_0)) AND (((`o`.`Status` <> 'valid') OR `o`.`Status` IS NULL) OR ((`o`.`Type` = 'ad-hoc') AND `t`.`Id` IS NULL))
2024-11-14 00:06:58 [INF] [Microsoft.EntityFrameworkCore.Database.Command] [13556] [101] - Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE `o`
FROM `OpenIddictTokens` AS `o`
WHERE FALSE
2024-11-14 00:06:58 [INF] [Microsoft.EntityFrameworkCore.Database.Command] [13556] [101] - Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE `o`
FROM `OpenIddictAuthorizations` AS `o`
WHERE FALSE
2024-11-14 00:06:58 [INF] [Volo.Abp.OpenIddict.Tokens.TokenCleanupBackgroundWorker] [13556] [101] - Lock is released for TokenCleanupBackgroundWorker
2024-11-14 01:06:36 [INF] [Microsoft.EntityFrameworkCore.Database.Command] [13556] [68] - Executed DbCommand (2ms) [Parameters=[@__ef_filter__p_0='?' (DbType = Boolean), @__Subtract_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
DELETE `a`
FROM `AbpSessions` AS `a`
WHERE (@__ef_filter__p_0 OR (`a`.`TenantId` IS NULL)) AND (`a`.`LastAccessed` IS NULL OR (`a`.`LastAccessed` < @__Subtract_0))
2024-11-14 01:06:58 [INF] [Volo.Abp.OpenIddict.Tokens.TokenCleanupBackgroundWorker] [13556] [68] - Lock is acquired for TokenCleanupBackgroundWorker
2024-11-14 01:06:58 [INF] [Volo.Abp.OpenIddict.Tokens.TokenCleanupService] [13556] [68] - Start cleanup.
2024-11-14 01:06:58 [INF] [Volo.Abp.OpenIddict.Tokens.TokenCleanupService] [13556] [68] - Start cleanup tokens.
2024-11-14 01:06:58 [INF] [Microsoft.EntityFrameworkCore.Database.Command] [13556] [100] - Executed DbCommand (1ms) [Parameters=[@__ef_filter__p_0='?' (DbType = Boolean), @__date_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
DELETE `o`
FROM `OpenIddictTokens` AS `o`
LEFT JOIN (
    SELECT `o0`.`Id`, `o0`.`Status`
    FROM `OpenIddictAuthorizations` AS `o0`
    WHERE @__ef_filter__p_0 OR NOT (`o0`.`IsDeleted`)
) AS `t` ON `o`.`AuthorizationId` = `t`.`Id`
WHERE ((@__ef_filter__p_0 OR NOT (`o`.`IsDeleted`)) AND (`o`.`CreationDate` < @__date_0)) AND (((`o`.`Status` NOT IN ('inactive', 'valid') OR (`o`.`Status` IS NULL)) OR (`t`.`Id` IS NOT NULL AND ((`t`.`Status` <> 'valid') OR `t`.`Status` IS NULL))) OR (`o`.`ExpirationDate` < UTC_TIMESTAMP()))
2024-11-14 01:06:58 [INF] [Volo.Abp.OpenIddict.Tokens.TokenCleanupService] [13556] [100] - Start cleanup authorizations.
2024-11-14 01:06:58 [INF] [Microsoft.EntityFrameworkCore.Database.Command] [13556] [100] - Executed DbCommand (1ms) [Parameters=[@__ef_filter__p_0='?' (DbType = Boolean), @__date_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT `o`.`Id`
FROM `OpenIddictAuthorizations` AS `o`
LEFT JOIN (
    SELECT `o0`.`Id`, `o0`.`AuthorizationId`
    FROM `OpenIddictTokens` AS `o0`
    WHERE @__ef_filter__p_0 OR NOT (`o0`.`IsDeleted`)
) AS `t` ON `o`.`Id` = `t`.`AuthorizationId`
WHERE ((@__ef_filter__p_0 OR NOT (`o`.`IsDeleted`)) AND (`o`.`CreationDate` < @__date_0)) AND (((`o`.`Status` <> 'valid') OR `o`.`Status` IS NULL) OR ((`o`.`Type` = 'ad-hoc') AND `t`.`Id` IS NULL))
2024-11-14 01:06:58 [INF] [Microsoft.EntityFrameworkCore.Database.Command] [13556] [100] - Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE `o`
FROM `OpenIddictTokens` AS `o`
WHERE FALSE
2024-11-14 01:06:58 [INF] [Microsoft.EntityFrameworkCore.Database.Command] [13556] [100] - Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE `o`
FROM `OpenIddictAuthorizations` AS `o`
WHERE FALSE
2024-11-14 01:06:58 [INF] [Volo.Abp.OpenIddict.Tokens.TokenCleanupBackgroundWorker] [13556] [100] - Lock is released for TokenCleanupBackgroundWorker
2024-11-14 02:06:37 [INF] [Microsoft.EntityFrameworkCore.Database.Command] [13556] [30] - Executed DbCommand (1ms) [Parameters=[@__ef_filter__p_0='?' (DbType = Boolean), @__Subtract_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
DELETE `a`
FROM `AbpSessions` AS `a`
WHERE (@__ef_filter__p_0 OR (`a`.`TenantId` IS NULL)) AND (`a`.`LastAccessed` IS NULL OR (`a`.`LastAccessed` < @__Subtract_0))
2024-11-14 02:06:59 [INF] [Volo.Abp.OpenIddict.Tokens.TokenCleanupBackgroundWorker] [13556] [30] - Lock is acquired for TokenCleanupBackgroundWorker
2024-11-14 02:06:59 [INF] [Volo.Abp.OpenIddict.Tokens.TokenCleanupService] [13556] [30] - Start cleanup.
2024-11-14 02:06:59 [INF] [Volo.Abp.OpenIddict.Tokens.TokenCleanupService] [13556] [30] - Start cleanup tokens.
2024-11-14 02:06:59 [INF] [Microsoft.EntityFrameworkCore.Database.Command] [13556] [92] - Executed DbCommand (0ms) [Parameters=[@__ef_filter__p_0='?' (DbType = Boolean), @__date_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
DELETE `o`
FROM `OpenIddictTokens` AS `o`
LEFT JOIN (
    SELECT `o0`.`Id`, `o0`.`Status`
    FROM `OpenIddictAuthorizations` AS `o0`
    WHERE @__ef_filter__p_0 OR NOT (`o0`.`IsDeleted`)
) AS `t` ON `o`.`AuthorizationId` = `t`.`Id`
WHERE ((@__ef_filter__p_0 OR NOT (`o`.`IsDeleted`)) AND (`o`.`CreationDate` < @__date_0)) AND (((`o`.`Status` NOT IN ('inactive', 'valid') OR (`o`.`Status` IS NULL)) OR (`t`.`Id` IS NOT NULL AND ((`t`.`Status` <> 'valid') OR `t`.`Status` IS NULL))) OR (`o`.`ExpirationDate` < UTC_TIMESTAMP()))
2024-11-14 02:06:59 [INF] [Volo.Abp.OpenIddict.Tokens.TokenCleanupService] [13556] [92] - Start cleanup authorizations.
2024-11-14 02:06:59 [INF] [Microsoft.EntityFrameworkCore.Database.Command] [13556] [92] - Executed DbCommand (1ms) [Parameters=[@__ef_filter__p_0='?' (DbType = Boolean), @__date_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT `o`.`Id`
FROM `OpenIddictAuthorizations` AS `o`
LEFT JOIN (
    SELECT `o0`.`Id`, `o0`.`AuthorizationId`
    FROM `OpenIddictTokens` AS `o0`
    WHERE @__ef_filter__p_0 OR NOT (`o0`.`IsDeleted`)
) AS `t` ON `o`.`Id` = `t`.`AuthorizationId`
WHERE ((@__ef_filter__p_0 OR NOT (`o`.`IsDeleted`)) AND (`o`.`CreationDate` < @__date_0)) AND (((`o`.`Status` <> 'valid') OR `o`.`Status` IS NULL) OR ((`o`.`Type` = 'ad-hoc') AND `t`.`Id` IS NULL))
2024-11-14 02:06:59 [INF] [Microsoft.EntityFrameworkCore.Database.Command] [13556] [92] - Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE `o`
FROM `OpenIddictTokens` AS `o`
WHERE FALSE
2024-11-14 02:06:59 [INF] [Microsoft.EntityFrameworkCore.Database.Command] [13556] [92] - Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE `o`
FROM `OpenIddictAuthorizations` AS `o`
WHERE FALSE
2024-11-14 02:06:59 [INF] [Volo.Abp.OpenIddict.Tokens.TokenCleanupBackgroundWorker] [13556] [92] - Lock is released for TokenCleanupBackgroundWorker
2024-11-14 03:06:37 [INF] [Microsoft.EntityFrameworkCore.Database.Command] [13556] [101] - Executed DbCommand (1ms) [Parameters=[@__ef_filter__p_0='?' (DbType = Boolean), @__Subtract_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
DELETE `a`
FROM `AbpSessions` AS `a`
WHERE (@__ef_filter__p_0 OR (`a`.`TenantId` IS NULL)) AND (`a`.`LastAccessed` IS NULL OR (`a`.`LastAccessed` < @__Subtract_0))
2024-11-14 03:06:59 [INF] [Volo.Abp.OpenIddict.Tokens.TokenCleanupBackgroundWorker] [13556] [101] - Lock is acquired for TokenCleanupBackgroundWorker
2024-11-14 03:06:59 [INF] [Volo.Abp.OpenIddict.Tokens.TokenCleanupService] [13556] [101] - Start cleanup.
2024-11-14 03:06:59 [INF] [Volo.Abp.OpenIddict.Tokens.TokenCleanupService] [13556] [101] - Start cleanup tokens.
2024-11-14 03:06:59 [INF] [Microsoft.EntityFrameworkCore.Database.Command] [13556] [50] - Executed DbCommand (1ms) [Parameters=[@__ef_filter__p_0='?' (DbType = Boolean), @__date_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
DELETE `o`
FROM `OpenIddictTokens` AS `o`
LEFT JOIN (
    SELECT `o0`.`Id`, `o0`.`Status`
    FROM `OpenIddictAuthorizations` AS `o0`
    WHERE @__ef_filter__p_0 OR NOT (`o0`.`IsDeleted`)
) AS `t` ON `o`.`AuthorizationId` = `t`.`Id`
WHERE ((@__ef_filter__p_0 OR NOT (`o`.`IsDeleted`)) AND (`o`.`CreationDate` < @__date_0)) AND (((`o`.`Status` NOT IN ('inactive', 'valid') OR (`o`.`Status` IS NULL)) OR (`t`.`Id` IS NOT NULL AND ((`t`.`Status` <> 'valid') OR `t`.`Status` IS NULL))) OR (`o`.`ExpirationDate` < UTC_TIMESTAMP()))
2024-11-14 03:06:59 [INF] [Volo.Abp.OpenIddict.Tokens.TokenCleanupService] [13556] [50] - Start cleanup authorizations.
2024-11-14 03:06:59 [INF] [Microsoft.EntityFrameworkCore.Database.Command] [13556] [50] - Executed DbCommand (0ms) [Parameters=[@__ef_filter__p_0='?' (DbType = Boolean), @__date_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT `o`.`Id`
FROM `OpenIddictAuthorizations` AS `o`
LEFT JOIN (
    SELECT `o0`.`Id`, `o0`.`AuthorizationId`
    FROM `OpenIddictTokens` AS `o0`
    WHERE @__ef_filter__p_0 OR NOT (`o0`.`IsDeleted`)
) AS `t` ON `o`.`Id` = `t`.`AuthorizationId`
WHERE ((@__ef_filter__p_0 OR NOT (`o`.`IsDeleted`)) AND (`o`.`CreationDate` < @__date_0)) AND (((`o`.`Status` <> 'valid') OR `o`.`Status` IS NULL) OR ((`o`.`Type` = 'ad-hoc') AND `t`.`Id` IS NULL))
2024-11-14 03:06:59 [INF] [Microsoft.EntityFrameworkCore.Database.Command] [13556] [50] - Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE `o`
FROM `OpenIddictTokens` AS `o`
WHERE FALSE
2024-11-14 03:06:59 [INF] [Microsoft.EntityFrameworkCore.Database.Command] [13556] [50] - Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE `o`
FROM `OpenIddictAuthorizations` AS `o`
WHERE FALSE
2024-11-14 03:06:59 [INF] [Volo.Abp.OpenIddict.Tokens.TokenCleanupBackgroundWorker] [13556] [50] - Lock is released for TokenCleanupBackgroundWorker
2024-11-14 06:54:16 [WRN] [DotNetCore.CAP.Internal.ConsumerRegister] [13556] [86] - RabbitMQ consumer cancelled. --> amq.ctag-8yilrnLxK0mfUJJ7Z26cjQ
2024-11-14 06:54:19 [WRN] [DotNetCore.CAP.Internal.ConsumerRegister] [13556] [86] - RabbitMQ consumer shutdown. --> Unexpected Exception: Unable to read data from the transport connection: 远程主机强迫关闭了一个现有的连接。.
2024-11-14 16:30:18 [INF] [Microsoft.EntityFrameworkCore.Database.Command] [13556] [4] - Executed DbCommand (4ms) [Parameters=[@__ef_filter__p_0='?' (DbType = Boolean), @__Subtract_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
DELETE `a`
FROM `AbpSessions` AS `a`
WHERE (@__ef_filter__p_0 OR (`a`.`TenantId` IS NULL)) AND (`a`.`LastAccessed` IS NULL OR (`a`.`LastAccessed` < @__Subtract_0))
2024-11-14 17:21:42 [INF] [Volo.Abp.OpenIddict.Tokens.TokenCleanupBackgroundWorker] [13556] [95] - Lock is acquired for TokenCleanupBackgroundWorker
2024-11-14 17:21:42 [INF] [Volo.Abp.OpenIddict.Tokens.TokenCleanupService] [13556] [95] - Start cleanup.
2024-11-14 17:21:42 [INF] [Volo.Abp.OpenIddict.Tokens.TokenCleanupService] [13556] [95] - Start cleanup tokens.
2024-11-14 17:21:42 [INF] [Microsoft.EntityFrameworkCore.Database.Command] [13556] [95] - Executed DbCommand (1ms) [Parameters=[@__ef_filter__p_0='?' (DbType = Boolean), @__date_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
DELETE `o`
FROM `OpenIddictTokens` AS `o`
LEFT JOIN (
    SELECT `o0`.`Id`, `o0`.`Status`
    FROM `OpenIddictAuthorizations` AS `o0`
    WHERE @__ef_filter__p_0 OR NOT (`o0`.`IsDeleted`)
) AS `t` ON `o`.`AuthorizationId` = `t`.`Id`
WHERE ((@__ef_filter__p_0 OR NOT (`o`.`IsDeleted`)) AND (`o`.`CreationDate` < @__date_0)) AND (((`o`.`Status` NOT IN ('inactive', 'valid') OR (`o`.`Status` IS NULL)) OR (`t`.`Id` IS NOT NULL AND ((`t`.`Status` <> 'valid') OR `t`.`Status` IS NULL))) OR (`o`.`ExpirationDate` < UTC_TIMESTAMP()))
2024-11-14 17:21:42 [INF] [Volo.Abp.OpenIddict.Tokens.TokenCleanupService] [13556] [95] - Start cleanup authorizations.
2024-11-14 17:21:42 [INF] [Microsoft.EntityFrameworkCore.Database.Command] [13556] [95] - Executed DbCommand (1ms) [Parameters=[@__ef_filter__p_0='?' (DbType = Boolean), @__date_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT `o`.`Id`
FROM `OpenIddictAuthorizations` AS `o`
LEFT JOIN (
    SELECT `o0`.`Id`, `o0`.`AuthorizationId`
    FROM `OpenIddictTokens` AS `o0`
    WHERE @__ef_filter__p_0 OR NOT (`o0`.`IsDeleted`)
) AS `t` ON `o`.`Id` = `t`.`AuthorizationId`
WHERE ((@__ef_filter__p_0 OR NOT (`o`.`IsDeleted`)) AND (`o`.`CreationDate` < @__date_0)) AND (((`o`.`Status` <> 'valid') OR `o`.`Status` IS NULL) OR ((`o`.`Type` = 'ad-hoc') AND `t`.`Id` IS NULL))
2024-11-14 17:21:42 [INF] [Microsoft.EntityFrameworkCore.Database.Command] [13556] [95] - Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE `o`
FROM `OpenIddictTokens` AS `o`
WHERE FALSE
2024-11-14 17:21:42 [INF] [Microsoft.EntityFrameworkCore.Database.Command] [13556] [95] - Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE `o`
FROM `OpenIddictAuthorizations` AS `o`
WHERE FALSE
2024-11-14 17:21:42 [INF] [Volo.Abp.OpenIddict.Tokens.TokenCleanupBackgroundWorker] [13556] [95] - Lock is released for TokenCleanupBackgroundWorker
2024-11-14 18:21:20 [INF] [Microsoft.EntityFrameworkCore.Database.Command] [13556] [122] - Executed DbCommand (2ms) [Parameters=[@__ef_filter__p_0='?' (DbType = Boolean), @__Subtract_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
DELETE `a`
FROM `AbpSessions` AS `a`
WHERE (@__ef_filter__p_0 OR (`a`.`TenantId` IS NULL)) AND (`a`.`LastAccessed` IS NULL OR (`a`.`LastAccessed` < @__Subtract_0))
2024-11-14 18:21:42 [INF] [Volo.Abp.OpenIddict.Tokens.TokenCleanupBackgroundWorker] [13556] [32] - Lock is acquired for TokenCleanupBackgroundWorker
2024-11-14 18:21:42 [INF] [Volo.Abp.OpenIddict.Tokens.TokenCleanupService] [13556] [32] - Start cleanup.
2024-11-14 18:21:42 [INF] [Volo.Abp.OpenIddict.Tokens.TokenCleanupService] [13556] [32] - Start cleanup tokens.
2024-11-14 18:21:42 [INF] [Microsoft.EntityFrameworkCore.Database.Command] [13556] [32] - Executed DbCommand (1ms) [Parameters=[@__ef_filter__p_0='?' (DbType = Boolean), @__date_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
DELETE `o`
FROM `OpenIddictTokens` AS `o`
LEFT JOIN (
    SELECT `o0`.`Id`, `o0`.`Status`
    FROM `OpenIddictAuthorizations` AS `o0`
    WHERE @__ef_filter__p_0 OR NOT (`o0`.`IsDeleted`)
) AS `t` ON `o`.`AuthorizationId` = `t`.`Id`
WHERE ((@__ef_filter__p_0 OR NOT (`o`.`IsDeleted`)) AND (`o`.`CreationDate` < @__date_0)) AND (((`o`.`Status` NOT IN ('inactive', 'valid') OR (`o`.`Status` IS NULL)) OR (`t`.`Id` IS NOT NULL AND ((`t`.`Status` <> 'valid') OR `t`.`Status` IS NULL))) OR (`o`.`ExpirationDate` < UTC_TIMESTAMP()))
2024-11-14 18:21:42 [INF] [Volo.Abp.OpenIddict.Tokens.TokenCleanupService] [13556] [32] - Start cleanup authorizations.
2024-11-14 18:21:42 [INF] [Microsoft.EntityFrameworkCore.Database.Command] [13556] [32] - Executed DbCommand (1ms) [Parameters=[@__ef_filter__p_0='?' (DbType = Boolean), @__date_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT `o`.`Id`
FROM `OpenIddictAuthorizations` AS `o`
LEFT JOIN (
    SELECT `o0`.`Id`, `o0`.`AuthorizationId`
    FROM `OpenIddictTokens` AS `o0`
    WHERE @__ef_filter__p_0 OR NOT (`o0`.`IsDeleted`)
) AS `t` ON `o`.`Id` = `t`.`AuthorizationId`
WHERE ((@__ef_filter__p_0 OR NOT (`o`.`IsDeleted`)) AND (`o`.`CreationDate` < @__date_0)) AND (((`o`.`Status` <> 'valid') OR `o`.`Status` IS NULL) OR ((`o`.`Type` = 'ad-hoc') AND `t`.`Id` IS NULL))
2024-11-14 18:21:42 [INF] [Microsoft.EntityFrameworkCore.Database.Command] [13556] [32] - Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE `o`
FROM `OpenIddictTokens` AS `o`
WHERE FALSE
2024-11-14 18:21:42 [INF] [Microsoft.EntityFrameworkCore.Database.Command] [13556] [32] - Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE `o`
FROM `OpenIddictAuthorizations` AS `o`
WHERE FALSE
2024-11-14 18:21:42 [INF] [Volo.Abp.OpenIddict.Tokens.TokenCleanupBackgroundWorker] [13556] [32] - Lock is released for TokenCleanupBackgroundWorker
2024-11-14 19:21:20 [INF] [Microsoft.EntityFrameworkCore.Database.Command] [13556] [110] - Executed DbCommand (1ms) [Parameters=[@__ef_filter__p_0='?' (DbType = Boolean), @__Subtract_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
DELETE `a`
FROM `AbpSessions` AS `a`
WHERE (@__ef_filter__p_0 OR (`a`.`TenantId` IS NULL)) AND (`a`.`LastAccessed` IS NULL OR (`a`.`LastAccessed` < @__Subtract_0))
2024-11-14 19:21:42 [INF] [Volo.Abp.OpenIddict.Tokens.TokenCleanupBackgroundWorker] [13556] [127] - Lock is acquired for TokenCleanupBackgroundWorker
2024-11-14 19:21:42 [INF] [Volo.Abp.OpenIddict.Tokens.TokenCleanupService] [13556] [127] - Start cleanup.
2024-11-14 19:21:42 [INF] [Volo.Abp.OpenIddict.Tokens.TokenCleanupService] [13556] [127] - Start cleanup tokens.
2024-11-14 19:21:42 [INF] [Microsoft.EntityFrameworkCore.Database.Command] [13556] [111] - Executed DbCommand (1ms) [Parameters=[@__ef_filter__p_0='?' (DbType = Boolean), @__date_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
DELETE `o`
FROM `OpenIddictTokens` AS `o`
LEFT JOIN (
    SELECT `o0`.`Id`, `o0`.`Status`
    FROM `OpenIddictAuthorizations` AS `o0`
    WHERE @__ef_filter__p_0 OR NOT (`o0`.`IsDeleted`)
) AS `t` ON `o`.`AuthorizationId` = `t`.`Id`
WHERE ((@__ef_filter__p_0 OR NOT (`o`.`IsDeleted`)) AND (`o`.`CreationDate` < @__date_0)) AND (((`o`.`Status` NOT IN ('inactive', 'valid') OR (`o`.`Status` IS NULL)) OR (`t`.`Id` IS NOT NULL AND ((`t`.`Status` <> 'valid') OR `t`.`Status` IS NULL))) OR (`o`.`ExpirationDate` < UTC_TIMESTAMP()))
2024-11-14 19:21:42 [INF] [Volo.Abp.OpenIddict.Tokens.TokenCleanupService] [13556] [111] - Start cleanup authorizations.
2024-11-14 19:21:42 [INF] [Microsoft.EntityFrameworkCore.Database.Command] [13556] [111] - Executed DbCommand (1ms) [Parameters=[@__ef_filter__p_0='?' (DbType = Boolean), @__date_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT `o`.`Id`
FROM `OpenIddictAuthorizations` AS `o`
LEFT JOIN (
    SELECT `o0`.`Id`, `o0`.`AuthorizationId`
    FROM `OpenIddictTokens` AS `o0`
    WHERE @__ef_filter__p_0 OR NOT (`o0`.`IsDeleted`)
) AS `t` ON `o`.`Id` = `t`.`AuthorizationId`
WHERE ((@__ef_filter__p_0 OR NOT (`o`.`IsDeleted`)) AND (`o`.`CreationDate` < @__date_0)) AND (((`o`.`Status` <> 'valid') OR `o`.`Status` IS NULL) OR ((`o`.`Type` = 'ad-hoc') AND `t`.`Id` IS NULL))
2024-11-14 19:21:42 [INF] [Microsoft.EntityFrameworkCore.Database.Command] [13556] [111] - Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE `o`
FROM `OpenIddictTokens` AS `o`
WHERE FALSE
2024-11-14 19:21:42 [INF] [Microsoft.EntityFrameworkCore.Database.Command] [13556] [111] - Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE `o`
FROM `OpenIddictAuthorizations` AS `o`
WHERE FALSE
2024-11-14 19:21:42 [INF] [Volo.Abp.OpenIddict.Tokens.TokenCleanupBackgroundWorker] [13556] [111] - Lock is released for TokenCleanupBackgroundWorker
2024-11-14 20:53:40 [WRN] [DotNetCore.CAP.Internal.ConsumerRegister] [13556] [35] - RabbitMQ consumer cancelled. --> amq.ctag-8yilrnLxK0mfUJJ7Z26cjQ
2024-11-14 20:53:42 [WRN] [DotNetCore.CAP.Internal.ConsumerRegister] [13556] [35] - RabbitMQ consumer shutdown. --> Unexpected Exception: Unable to read data from the transport connection: 远程主机强迫关闭了一个现有的连接。.
2024-11-14 21:00:08 [INF] [Microsoft.EntityFrameworkCore.Database.Command] [13556] [85] - Executed DbCommand (1ms) [Parameters=[@__ef_filter__p_0='?' (DbType = Boolean), @__Subtract_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
DELETE `a`
FROM `AbpSessions` AS `a`
WHERE (@__ef_filter__p_0 OR (`a`.`TenantId` IS NULL)) AND (`a`.`LastAccessed` IS NULL OR (`a`.`LastAccessed` < @__Subtract_0))
2024-11-14 21:00:30 [INF] [Volo.Abp.OpenIddict.Tokens.TokenCleanupBackgroundWorker] [13556] [85] - Lock is acquired for TokenCleanupBackgroundWorker
2024-11-14 21:00:30 [INF] [Volo.Abp.OpenIddict.Tokens.TokenCleanupService] [13556] [85] - Start cleanup.
2024-11-14 21:00:30 [INF] [Volo.Abp.OpenIddict.Tokens.TokenCleanupService] [13556] [85] - Start cleanup tokens.
2024-11-14 21:00:30 [INF] [Microsoft.EntityFrameworkCore.Database.Command] [13556] [85] - Executed DbCommand (1ms) [Parameters=[@__ef_filter__p_0='?' (DbType = Boolean), @__date_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
DELETE `o`
FROM `OpenIddictTokens` AS `o`
LEFT JOIN (
    SELECT `o0`.`Id`, `o0`.`Status`
    FROM `OpenIddictAuthorizations` AS `o0`
    WHERE @__ef_filter__p_0 OR NOT (`o0`.`IsDeleted`)
) AS `t` ON `o`.`AuthorizationId` = `t`.`Id`
WHERE ((@__ef_filter__p_0 OR NOT (`o`.`IsDeleted`)) AND (`o`.`CreationDate` < @__date_0)) AND (((`o`.`Status` NOT IN ('inactive', 'valid') OR (`o`.`Status` IS NULL)) OR (`t`.`Id` IS NOT NULL AND ((`t`.`Status` <> 'valid') OR `t`.`Status` IS NULL))) OR (`o`.`ExpirationDate` < UTC_TIMESTAMP()))
2024-11-14 21:00:30 [INF] [Volo.Abp.OpenIddict.Tokens.TokenCleanupService] [13556] [85] - Start cleanup authorizations.
2024-11-14 21:00:30 [INF] [Microsoft.EntityFrameworkCore.Database.Command] [13556] [64] - Executed DbCommand (2ms) [Parameters=[@__ef_filter__p_0='?' (DbType = Boolean), @__date_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT `o`.`Id`
FROM `OpenIddictAuthorizations` AS `o`
LEFT JOIN (
    SELECT `o0`.`Id`, `o0`.`AuthorizationId`
    FROM `OpenIddictTokens` AS `o0`
    WHERE @__ef_filter__p_0 OR NOT (`o0`.`IsDeleted`)
) AS `t` ON `o`.`Id` = `t`.`AuthorizationId`
WHERE ((@__ef_filter__p_0 OR NOT (`o`.`IsDeleted`)) AND (`o`.`CreationDate` < @__date_0)) AND (((`o`.`Status` <> 'valid') OR `o`.`Status` IS NULL) OR ((`o`.`Type` = 'ad-hoc') AND `t`.`Id` IS NULL))
2024-11-14 21:00:30 [INF] [Microsoft.EntityFrameworkCore.Database.Command] [13556] [64] - Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE `o`
FROM `OpenIddictTokens` AS `o`
WHERE FALSE
2024-11-14 21:00:30 [INF] [Microsoft.EntityFrameworkCore.Database.Command] [13556] [64] - Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE `o`
FROM `OpenIddictAuthorizations` AS `o`
WHERE FALSE
2024-11-14 21:00:30 [INF] [Volo.Abp.OpenIddict.Tokens.TokenCleanupBackgroundWorker] [13556] [64] - Lock is released for TokenCleanupBackgroundWorker
2024-11-14 22:00:08 [INF] [Microsoft.EntityFrameworkCore.Database.Command] [13556] [59] - Executed DbCommand (2ms) [Parameters=[@__ef_filter__p_0='?' (DbType = Boolean), @__Subtract_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
DELETE `a`
FROM `AbpSessions` AS `a`
WHERE (@__ef_filter__p_0 OR (`a`.`TenantId` IS NULL)) AND (`a`.`LastAccessed` IS NULL OR (`a`.`LastAccessed` < @__Subtract_0))
2024-11-14 22:00:30 [INF] [Volo.Abp.OpenIddict.Tokens.TokenCleanupBackgroundWorker] [13556] [59] - Lock is acquired for TokenCleanupBackgroundWorker
2024-11-14 22:00:30 [INF] [Volo.Abp.OpenIddict.Tokens.TokenCleanupService] [13556] [59] - Start cleanup.
2024-11-14 22:00:30 [INF] [Volo.Abp.OpenIddict.Tokens.TokenCleanupService] [13556] [59] - Start cleanup tokens.
2024-11-14 22:00:30 [INF] [Microsoft.EntityFrameworkCore.Database.Command] [13556] [59] - Executed DbCommand (4ms) [Parameters=[@__ef_filter__p_0='?' (DbType = Boolean), @__date_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
DELETE `o`
FROM `OpenIddictTokens` AS `o`
LEFT JOIN (
    SELECT `o0`.`Id`, `o0`.`Status`
    FROM `OpenIddictAuthorizations` AS `o0`
    WHERE @__ef_filter__p_0 OR NOT (`o0`.`IsDeleted`)
) AS `t` ON `o`.`AuthorizationId` = `t`.`Id`
WHERE ((@__ef_filter__p_0 OR NOT (`o`.`IsDeleted`)) AND (`o`.`CreationDate` < @__date_0)) AND (((`o`.`Status` NOT IN ('inactive', 'valid') OR (`o`.`Status` IS NULL)) OR (`t`.`Id` IS NOT NULL AND ((`t`.`Status` <> 'valid') OR `t`.`Status` IS NULL))) OR (`o`.`ExpirationDate` < UTC_TIMESTAMP()))
2024-11-14 22:00:30 [INF] [Volo.Abp.OpenIddict.Tokens.TokenCleanupService] [13556] [59] - Start cleanup authorizations.
2024-11-14 22:00:30 [INF] [Microsoft.EntityFrameworkCore.Database.Command] [13556] [59] - Executed DbCommand (1ms) [Parameters=[@__ef_filter__p_0='?' (DbType = Boolean), @__date_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT `o`.`Id`
FROM `OpenIddictAuthorizations` AS `o`
LEFT JOIN (
    SELECT `o0`.`Id`, `o0`.`AuthorizationId`
    FROM `OpenIddictTokens` AS `o0`
    WHERE @__ef_filter__p_0 OR NOT (`o0`.`IsDeleted`)
) AS `t` ON `o`.`Id` = `t`.`AuthorizationId`
WHERE ((@__ef_filter__p_0 OR NOT (`o`.`IsDeleted`)) AND (`o`.`CreationDate` < @__date_0)) AND (((`o`.`Status` <> 'valid') OR `o`.`Status` IS NULL) OR ((`o`.`Type` = 'ad-hoc') AND `t`.`Id` IS NULL))
2024-11-14 22:00:30 [INF] [Microsoft.EntityFrameworkCore.Database.Command] [13556] [59] - Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE `o`
FROM `OpenIddictTokens` AS `o`
WHERE FALSE
2024-11-14 22:00:30 [INF] [Microsoft.EntityFrameworkCore.Database.Command] [13556] [59] - Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE `o`
FROM `OpenIddictAuthorizations` AS `o`
WHERE FALSE
2024-11-14 22:00:30 [INF] [Volo.Abp.OpenIddict.Tokens.TokenCleanupBackgroundWorker] [13556] [59] - Lock is released for TokenCleanupBackgroundWorker
2024-11-14 23:00:08 [INF] [Microsoft.EntityFrameworkCore.Database.Command] [13556] [102] - Executed DbCommand (2ms) [Parameters=[@__ef_filter__p_0='?' (DbType = Boolean), @__Subtract_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
DELETE `a`
FROM `AbpSessions` AS `a`
WHERE (@__ef_filter__p_0 OR (`a`.`TenantId` IS NULL)) AND (`a`.`LastAccessed` IS NULL OR (`a`.`LastAccessed` < @__Subtract_0))
2024-11-14 23:00:30 [INF] [Volo.Abp.OpenIddict.Tokens.TokenCleanupBackgroundWorker] [13556] [102] - Lock is acquired for TokenCleanupBackgroundWorker
2024-11-14 23:00:30 [INF] [Volo.Abp.OpenIddict.Tokens.TokenCleanupService] [13556] [102] - Start cleanup.
2024-11-14 23:00:30 [INF] [Volo.Abp.OpenIddict.Tokens.TokenCleanupService] [13556] [102] - Start cleanup tokens.
2024-11-14 23:00:30 [INF] [Microsoft.EntityFrameworkCore.Database.Command] [13556] [102] - Executed DbCommand (12ms) [Parameters=[@__ef_filter__p_0='?' (DbType = Boolean), @__date_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
DELETE `o`
FROM `OpenIddictTokens` AS `o`
LEFT JOIN (
    SELECT `o0`.`Id`, `o0`.`Status`
    FROM `OpenIddictAuthorizations` AS `o0`
    WHERE @__ef_filter__p_0 OR NOT (`o0`.`IsDeleted`)
) AS `t` ON `o`.`AuthorizationId` = `t`.`Id`
WHERE ((@__ef_filter__p_0 OR NOT (`o`.`IsDeleted`)) AND (`o`.`CreationDate` < @__date_0)) AND (((`o`.`Status` NOT IN ('inactive', 'valid') OR (`o`.`Status` IS NULL)) OR (`t`.`Id` IS NOT NULL AND ((`t`.`Status` <> 'valid') OR `t`.`Status` IS NULL))) OR (`o`.`ExpirationDate` < UTC_TIMESTAMP()))
2024-11-14 23:00:30 [INF] [Volo.Abp.OpenIddict.Tokens.TokenCleanupService] [13556] [102] - Start cleanup authorizations.
2024-11-14 23:00:30 [INF] [Microsoft.EntityFrameworkCore.Database.Command] [13556] [102] - Executed DbCommand (1ms) [Parameters=[@__ef_filter__p_0='?' (DbType = Boolean), @__date_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT `o`.`Id`
FROM `OpenIddictAuthorizations` AS `o`
LEFT JOIN (
    SELECT `o0`.`Id`, `o0`.`AuthorizationId`
    FROM `OpenIddictTokens` AS `o0`
    WHERE @__ef_filter__p_0 OR NOT (`o0`.`IsDeleted`)
) AS `t` ON `o`.`Id` = `t`.`AuthorizationId`
WHERE ((@__ef_filter__p_0 OR NOT (`o`.`IsDeleted`)) AND (`o`.`CreationDate` < @__date_0)) AND (((`o`.`Status` <> 'valid') OR `o`.`Status` IS NULL) OR ((`o`.`Type` = 'ad-hoc') AND `t`.`Id` IS NULL))
2024-11-14 23:00:30 [INF] [Microsoft.EntityFrameworkCore.Database.Command] [13556] [102] - Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE `o`
FROM `OpenIddictTokens` AS `o`
WHERE FALSE
2024-11-14 23:00:30 [INF] [Microsoft.EntityFrameworkCore.Database.Command] [13556] [102] - Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE `o`
FROM `OpenIddictAuthorizations` AS `o`
WHERE FALSE
2024-11-14 23:00:30 [INF] [Volo.Abp.OpenIddict.Tokens.TokenCleanupBackgroundWorker] [13556] [102] - Lock is released for TokenCleanupBackgroundWorker
